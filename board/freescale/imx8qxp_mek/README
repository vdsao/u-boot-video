U-Boot for the NXP i.MX8QXP EVK board

Quick Start
===========

- Build U-Boot
- Build the ARM Trusted firmware binary
- Get scfw_tcm.bin and ahab-container.img
- Get mkimage tool
- Generate flash.bin using imx-mkimage
- Flash the binary into the SD card
- Boot

Build U-Boot
============

$ make imx8qxp_mek_defconfig
$ make

Get and Build the ARM Trusted firmware
======================================

$ git clone https://source.codeaurora.org/external/imx/imx-atf
$ cd imx-atf/
$ git checkout origin/imx_4.9.88_imx8qxp_beta2 -b imx_4.9.88_imx8qxp_beta2
$ make PLAT=imx8qxp bl31

Get scfw_tcm.bin and ahab-container.img
==============================

$ wget https://www.nxp.com/lgfiles/NMG/MAD/YOCTO/imx-sc-firmware-0.7.bin
$ chmod +x imx-sc-firmware-0.7.bin
$ ./imx-sc-firmware-0.7.bin
$ wget https://www.nxp.com/lgfiles/NMG/MAD/YOCTO/firmware-imx-7.6.bin
$ chmod +x firmware-imx-7.6.bin
$ ./firmware-imx-7.6.bin

Get imx-mkimage tool
==============================
Download the imx-mkimage tool:

$ git clone https://source.codeaurora.org/external/imx/imx-mkimage/
$ cd imx-mkimage/
$ git checkout origin/imx_4.9.88_imx8qxp_beta2 -b imx_4.9.88_imx8qxp_beta2


Generate flash.bin using imx-mkimage
====================================

Copy the following binaries to imx-mkimage/iMX8M folder:

$ cp imx-atf/build/imx8qxp/release/bl31.bin imx-mkimage/iMX8QX/
$ cp u-boot/u-boot.bin imx-mkimage/iMX8QX/

Copy the following firmwares to imx-mkimage/iMX8 folder :

$ cp firmware-imx-7.6/firmware/seco/ahab-container.img imx-mkimage/iMX8QX/
$ cp imx-sc-firmware-0.7/mx8qx-mek-scfw-tcm.bin imx-mkimage/iMX8QX/scfw_tcm.bin

$ cd imx-mkimage/
$ make SOC=iMX8QX flash

Flash the binary into the SD card
=================================

Burn the flash.bin binary to SD card offset 32KB:

$ sudo dd if=iMX8QX/flash.bin of=/dev/sd[x] bs=1024 seek=32

Boot
====
Set Boot switch SW2: 1100.
